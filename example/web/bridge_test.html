<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>WSD Bridge H5 æµ‹è¯•</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background: #f4f6fa; }
    .banner {
      background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
      color: #fff;
      padding: 32px 20px 20px 20px;
      text-align: center;
      border-bottom-left-radius: 32px;
      border-bottom-right-radius: 32px;
      box-shadow: 0 2px 8px rgba(106,17,203,0.08);
    }
    .banner h1 { margin: 0 0 8px 0; font-size: 2.2em; letter-spacing: 2px; }
    .banner p { margin: 0; font-size: 1.1em; opacity: 0.92; }
    .env-status {
      margin: 18px auto 0 auto; max-width: 520px; padding: 10px 0; font-size: 1.1em; font-weight: bold;
      border-radius: 8px; text-align: center;
    }
    .env-ok { background: #e6ffed; color: #237804; border: 1px solid #b7eb8f; }
    .env-fail { background: #fff1f0; color: #cf1322; border: 1px solid #ffa39e; }
    .section {
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      padding: 22px 18px 18px 18px;
      margin: 28px auto 0 auto;
      max-width: 520px;
      border-left: 6px solid #6a11cb;
      position: relative;
    }
    .section h2 {
      color: #2575fc;
      margin-top: 0;
      font-size: 1.25em;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .section .icon {
      font-size: 1.3em;
      margin-right: 4px;
    }
    label { display: block; margin-top: 8px; font-weight: 500; }
    input, textarea {
      width: 100%; margin-top: 4px; margin-bottom: 8px; border-radius: 6px; border: 1px solid #d0d7e2; padding: 7px 10px; font-size: 1em;
      background: #f8fafd;
    }
    button {
      margin-top: 8px; padding: 10px 0; width: 100%; border: none; border-radius: 6px; font-size: 1.1em; font-weight: bold;
      background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%); color: #fff; cursor: pointer; box-shadow: 0 1px 4px rgba(106,17,203,0.08);
      transition: background 0.2s;
    }
    button:hover { background: linear-gradient(90deg, #2575fc 0%, #6a11cb 100%); }
    .result-box {
      background: #f0f7ff;
      color: #1a237e;
      border-radius: 6px;
      border: 1px solid #b3c6e6;
      margin-top: 8px;
      padding: 8px 10px;
      font-size: 15px;
      min-height: 22px;
      font-family: 'Fira Mono', 'Consolas', 'Menlo', monospace;
      word-break: break-all;
    }
    .tip {
      background: #fffbe6; color: #b8860b; border-left: 5px solid #ffe066; padding: 10px 14px; border-radius: 8px; margin: 18px auto 0 auto; max-width: 520px;
      font-size: 1em; font-weight: 500;
    }
    @media (max-width: 600px) {
      .section, .tip, .env-status { max-width: 98vw; }
      .banner { padding: 24px 4vw 14px 4vw; }
    }
  </style>
</head>
<body>
  <div class="banner">
    <h1>ğŸ§ª WSD Bridge H5 æµ‹è¯•</h1>
    <p>ä¸€ç«™å¼éªŒè¯ <b>JSBridge</b> ä¸åŸç”Ÿæ¡¥æ¥èƒ½åŠ›ï¼Œæ”¯æŒ eventTrackerã€openWebViewã€å‚æ•°æ ¡éªŒã€å›è°ƒç­‰å…¨æµç¨‹ã€‚<br>è¯·åœ¨ App WebView ä¸­è®¿é—®æœ¬é¡µï¼Œæ‰€æœ‰ç»“æœå®æ—¶é«˜äº®å±•ç¤ºã€‚</p>
  </div>

  <div id="pageTimestamp" class="env-status" style="background:#fffbe6;color:#b8860b;border:1px solid #ffe066;margin-top:8px;">é¡µé¢åŠ è½½æ—¶é—´æˆ³ï¼š<span id="timestampValue"></span></div>

  <div id="envStatus" class="env-status">ç¯å¢ƒæ£€æµ‹ä¸­...</div>

  <div class="section">
    <h2><span class="icon">ğŸ“Š</span>1. eventTracker æµ‹è¯•</h2>
    <label>eventName:</label>
    <input id="eventTrackerName" value="test_event" />
    <label>eventValue (JSON):</label>
    <textarea id="eventTrackerValue">{"foo": "bar"}</textarea>
    <button onclick="callEventTracker()">ğŸš€ è°ƒç”¨ eventTracker</button>
    <div id="result-eventTracker" class="result-box"></div>
    <button onclick="copyResult('result-eventTracker')" style="margin-top:4px;background:#e6f7ff;color:#1890ff;">å¤åˆ¶ç»“æœ</button>
  </div>

  <div class="section">
    <h2><span class="icon">ğŸŒ</span>2. openWebView æµ‹è¯•</h2>
    <label>url:</label>
    <input id="openWebViewUrl" value="https://flutter.dev" />
    <label>type (1=å¤–è·³, 2=å†…åµŒ):</label>
    <input id="openWebViewType" value="2" />
    <button onclick="callOpenWebView(2, 'https://www.example.com')">æµ‹è¯•å†…è·³ï¼ˆtype=2ï¼‰</button>
    <button onclick="callOpenWebView(1, 'https://www.example.com')">æµ‹è¯•å¤–è·³ï¼ˆtype=1ï¼‰</button>
    <div id="resultBox" style="margin-top:20px;"></div>
    <button onclick="copyResult('resultBox')" style="margin-top:4px;background:#e6f7ff;color:#1890ff;">å¤åˆ¶ç»“æœ</button>
  </div>

  <div class="section">
    <h2><span class="icon">ğŸŒ</span>3. openAndroid æµ‹è¯•</h2>
    <label>url:</label>
    <input id="openAndroidUrl" value="https://www.baidu.com" />
    <button onclick="callOpenAndroid()">ğŸ”— è°ƒç”¨ openAndroid</button>
    <div id="result-openAndroid" class="result-box"></div>
    <button onclick="copyResult('result-openAndroid')" style="margin-top:4px;background:#e6f7ff;color:#1890ff;">å¤åˆ¶ç»“æœ</button>
  </div>

  <div class="section">
    <h2><span class="icon">âŒ</span>4. closeWebView æµ‹è¯•</h2>
    <button onclick="callCloseWebView()">ğŸ›‘ è°ƒç”¨ closeWebView</button>
    <div id="result-closeWebView" class="result-box"></div>
    <button onclick="copyResult('result-closeWebView')" style="margin-top:4px;background:#e6f7ff;color:#1890ff;">å¤åˆ¶ç»“æœ</button>
    <div style="text-align:center;margin:16px 0;">
      <button onclick="openChildTestPage()" style="width:auto;padding:8px 24px;font-size:1em;">æ‰“å¼€äºŒçº§æµ‹è¯•é¡µï¼ˆæ–°æ ‡ç­¾é¡µï¼‰</button>
    </div>
  </div>

  <div class="section">
    <h2><span class="icon">ğŸ§‘â€ğŸ’»</span>5. getUseragent æµ‹è¯•</h2>
    <button onclick="callGetUseragent()">ğŸ” è·å– useragent</button>
    <div id="result-getUseragent" class="result-box"></div>
    <button onclick="copyResult('result-getUseragent')" style="margin-top:4px;background:#e6f7ff;color:#1890ff;">å¤åˆ¶ç»“æœ</button>
  </div>

  <div class="section">
    <h2><span class="icon">ğŸ”‘</span>6. googleLogin æµ‹è¯•</h2>
    <button onclick="callGoogleLogin()">ğŸ”‘ è°ƒç”¨ googleLogin</button>
    <div id="result-googleLogin" class="result-box"></div>
    <button onclick="copyResult('result-googleLogin')" style="margin-top:4px;background:#e6f7ff;color:#1890ff;">å¤åˆ¶ç»“æœ</button>
  </div>

  <div class="section">
    <h2><span class="icon">ğŸ”µ</span>7. facebookLogin æµ‹è¯•</h2>
    <button onclick="callFacebookLogin()">ğŸ”µ è°ƒç”¨ facebookLogin</button>
    <div id="result-facebookLogin" class="result-box"></div>
    <button onclick="copyResult('result-facebookLogin')" style="margin-top:4px;background:#e6f7ff;color:#1890ff;">å¤åˆ¶ç»“æœ</button>
  </div>

  <div class="section">
    <h2><span class="icon">ğŸ“¬</span>8. getFcmToken æµ‹è¯•</h2>
    <button onclick="callGetFcmToken()">ğŸ“¬ è°ƒç”¨ getFcmToken</button>
    <div id="result-getFcmToken" class="result-box"></div>
    <button onclick="copyResult('result-getFcmToken')" style="margin-top:4px;background:#e6f7ff;color:#1890ff;">å¤åˆ¶ç»“æœ</button>
  </div>

  <div class="section">
    <h2><span class="icon">âš ï¸</span>9. alert æµ‹è¯•</h2>
    <label>message:</label>
    <input id="alertMsg" value="Hello from H5!" />
    <button onclick="callAlert()">âš ï¸ è°ƒç”¨ alert</button>
    <div id="result-alert" class="result-box"></div>
    <button onclick="copyResult('result-alert')" style="margin-top:4px;background:#e6f7ff;color:#1890ff;">å¤åˆ¶ç»“æœ</button>
  </div>

  <div class="section">
    <h2><span class="icon">ğŸŒ</span>10. openWindow æµ‹è¯•</h2>
    <label>url:</label>
    <input id="openWindowUrl" value="https://www.baidu.com" />
    <button onclick="callOpenWindow()">ğŸŒ è°ƒç”¨ openWindow</button>
    <div id="result-openWindow" class="result-box"></div>
    <button onclick="copyResult('result-openWindow')" style="margin-top:4px;background:#e6f7ff;color:#1890ff;">å¤åˆ¶ç»“æœ</button>
  </div>

  <div class="section">
    <h2><span class="icon">ğŸ”—</span>11. handleHtmlLink æµ‹è¯•</h2>
    <label>url:</label>
    <input id="handleHtmlLinkUrl" value="https://www.baidu.com" />
    <button onclick="callHandleHtmlLink()">ğŸ”— è°ƒç”¨ handleHtmlLink</button>
    <div id="result-handleHtmlLink" class="result-box"></div>
    <button onclick="copyResult('result-handleHtmlLink')" style="margin-top:4px;background:#e6f7ff;color:#1890ff;">å¤åˆ¶ç»“æœ</button>
  </div>

  <div class="tip">âš¡ <b>æç¤ºï¼š</b>å¦‚éœ€æœ¬åœ°è”è°ƒï¼Œè¯·ç”¨ <b>http://localhost:8080/bridge_test.html</b> ä½œä¸º WebView åœ°å€ã€‚</div>

  <!-- ========== åŸç”ŸJSèƒ½åŠ›æ¡¥æ¥æµ‹è¯• ========== -->
  <div class="section">
    <h2><span class="icon">ğŸ§©</span>12. åŸç”ŸJSèƒ½åŠ›æ¡¥æ¥æµ‹è¯•</h2>
    <label>window.alert æµ‹è¯•</label>
    <input id="jsAlertMsg" value="Hello from window.alert!" />
    <button onclick="testJsAlert()">ğŸŸ£ è°ƒç”¨ window.alert</button>
    <div id="result-jsAlert" class="result-box"></div>

    <label style="margin-top:16px;">window.confirm æµ‹è¯•</label>
    <input id="jsConfirmMsg" value="Are you sure?" />
    <button onclick="testJsConfirm()">ğŸŸ¢ è°ƒç”¨ window.confirm</button>
    <div id="result-jsConfirm" class="result-box"></div>

    <label style="margin-top:16px;">window.prompt æµ‹è¯•</label>
    <input id="jsPromptMsg" value="è¯·è¾“å…¥å†…å®¹" />
    <input id="jsPromptDefault" value="é»˜è®¤å€¼" />
    <button onclick="testJsPrompt()">ğŸŸ  è°ƒç”¨ window.prompt</button>
    <div id="result-jsPrompt" class="result-box"></div>

    <label style="margin-top:16px;">window.open æµ‹è¯•</label>
    <input id="jsOpenUrl" value="https://flutter.dev" />
    <button onclick="testJsOpen()">ğŸ”µ è°ƒç”¨ window.open</button>
    <div id="result-jsOpen" class="result-box"></div>

    <label style="margin-top:16px;">aæ ‡ç­¾è¶…é“¾æ¥æµ‹è¯•</label>
    <input id="jsALink" value="https://www.baidu.com" />
    <a id="testALink" href="https://www.baidu.com" target="_blank" style="display:inline-block;margin-top:8px;color:#2575fc;text-decoration:underline;">ç‚¹å‡»è·³è½¬ a æ ‡ç­¾</a>
    <div id="result-jsALink" class="result-box"></div>
  </div>

  <script>
    console.log('H5 JS loaded at', new Date());

    // ç¯å¢ƒæ£€æµ‹
    function checkBridgeEnv() {
      var envStatus = document.getElementById('envStatus');
      if (window.flutter_inappwebview && typeof window.flutter_inappwebview.callHandler === 'function') {
        envStatus.textContent = 'âœ… å·²æ£€æµ‹åˆ°æ¡¥æ¥ç¯å¢ƒï¼Œå¯æ­£å¸¸è°ƒç”¨';
        envStatus.className = 'env-status env-ok';
        return true;
      } else {
        envStatus.textContent = 'âŒ æœªæ£€æµ‹åˆ°æ¡¥æ¥ç¯å¢ƒï¼Œè¯·åœ¨Appå†…WebViewä¸­æ‰“å¼€';
        envStatus.className = 'env-status env-fail';
        return false;
      }
    }
    checkBridgeEnv();

    // eventTracker æµ‹è¯•
    function callEventTracker() {
      if (!checkBridgeEnv()) {
        showResult('result-eventTracker', 'eventTracker', {}, '[æœªæ£€æµ‹åˆ°æ¡¥æ¥ç¯å¢ƒ]');
        return;
      }
      let eventName = document.getElementById('eventTrackerName').value;
      let eventValue = safeParse(document.getElementById('eventTrackerValue').value);
      if (!eventName || !eventValue) return;
      window.flutter_inappwebview.callHandler('eventTracker', { eventName, eventValue })
        .then(function(result) {
          showResult('result-eventTracker', 'eventTracker', { eventName, eventValue }, result);
        })
        .catch(function(err) {
          showResult('result-eventTracker', 'eventTracker', { eventName, eventValue }, '[å¼‚å¸¸] ' + err);
        });
    }

    // openWebView æµ‹è¯•
    function callOpenWebView(type, url) {
      const params = { type, url };
      if (window.flutter_inappwebview && window.flutter_inappwebview.callHandler) {
        window.flutter_inappwebview.callHandler('openWebView', params).then(function(result) {
          console.log('openWebView result:', result);
          showResult('resultBox', 'openWebView', params, result);
          if (!result) {
            alert('æ’ä»¶è¿”å›ç»“æœä¸º nullï¼Œè¯·æ£€æŸ¥æ’ä»¶ç«¯ openWebView handler çš„è¿”å›å€¼ï¼');
            return;
          }
          if (result.code === 0 && result.data && result.data.type && result.data.url) {
            if (result.data.type === 2) {
              window.location.href = result.data.url;
            } else if (result.data.type === 1) {
              window.open(result.data.url, '_blank');
            }
          }
        });
      } else {
        showResult('resultBox', 'openWebView', params, { code: -1, msg: 'æœªæ£€æµ‹åˆ° flutter_inappwebview ç¯å¢ƒ', data: null });
      }
    }

    // openAndroid æµ‹è¯•
    function callOpenAndroid() {
      if (!checkBridgeEnv()) {
        showResult('result-openAndroid', 'openAndroid', {}, '[æœªæ£€æµ‹åˆ°æ¡¥æ¥ç¯å¢ƒ]');
        return;
      }
      let url = document.getElementById('openAndroidUrl').value;
      window.flutter_inappwebview.callHandler('openAndroid', { url })
        .then(function(result) {
          showResult('result-openAndroid', 'openAndroid', { url }, result);
        })
        .catch(function(err) {
          showResult('result-openAndroid', 'openAndroid', { url }, '[å¼‚å¸¸] ' + err);
        });
    }

    // closeWebView æµ‹è¯•
    function callCloseWebView() {
      if (!checkBridgeEnv()) {
        showResult('result-closeWebView', 'closeWebView', {}, '[æœªæ£€æµ‹åˆ°æ¡¥æ¥ç¯å¢ƒ]');
        return;
      }
      window.flutter_inappwebview.callHandler('closeWebView', {})
        .then(function(result) {
          showResult('result-closeWebView', 'closeWebView', {}, result);
          // ä»…åœ¨äºŒçº§é¡µé¢è‡ªåŠ¨å…³é—­
          if (isChildPage() && result && result.code === 0 && result.data && result.data.closed === true) {
            window.close();
            // å…œåº•ï¼šå…³é—­å¤±è´¥æ—¶è¿”å›ä¸Šä¸€é¡µ
            setTimeout(function() {
              if (!window.closed) {
                window.history.back();
              }
            }, 300);
          }
        })
        .catch(function(err) {
          showResult('result-closeWebView', 'closeWebView', {}, '[å¼‚å¸¸] ' + err);
        });
    }

    // getUseragent æµ‹è¯•
    function callGetUseragent() {
      if (!checkBridgeEnv()) {
        showResult('result-getUseragent', 'getUseragent', {}, '[æœªæ£€æµ‹åˆ°æ¡¥æ¥ç¯å¢ƒ]');
        return;
      }
      window.flutter_inappwebview.callHandler('getUseragent', {})
        .then(function(result) {
          showResult('result-getUseragent', 'getUseragent', {}, result);
        })
        .catch(function(err) {
          showResult('result-getUseragent', 'getUseragent', {}, '[å¼‚å¸¸] ' + err);
        });
    }

    // googleLogin æµ‹è¯•
    function callGoogleLogin() {
      if (!checkBridgeEnv()) {
        showResult('result-googleLogin', 'googleLogin', {}, '[æœªæ£€æµ‹åˆ°æ¡¥æ¥ç¯å¢ƒ]');
        return;
      }
      window.flutter_inappwebview.callHandler('googleLogin', {})
        .then(function(result) {
          showResult('result-googleLogin', 'googleLogin', {}, result);
        })
        .catch(function(err) {
          showResult('result-googleLogin', 'googleLogin', {}, '[å¼‚å¸¸] ' + err);
        });
    }

    // facebookLogin æµ‹è¯•
    function callFacebookLogin() {
      if (!checkBridgeEnv()) {
        showResult('result-facebookLogin', 'facebookLogin', {}, '[æœªæ£€æµ‹åˆ°æ¡¥æ¥ç¯å¢ƒ]');
        return;
      }
      window.flutter_inappwebview.callHandler('facebookLogin', {})
        .then(function(result) {
          showResult('result-facebookLogin', 'facebookLogin', {}, result);
        })
        .catch(function(err) {
          showResult('result-facebookLogin', 'facebookLogin', {}, '[å¼‚å¸¸] ' + err);
        });
    }

    // getFcmToken æµ‹è¯•
    function callGetFcmToken() {
      if (!checkBridgeEnv()) {
        showResult('result-getFcmToken', 'getFcmToken', {}, '[æœªæ£€æµ‹åˆ°æ¡¥æ¥ç¯å¢ƒ]');
        return;
      }
      window.flutter_inappwebview.callHandler('getFcmToken', {})
        .then(function(result) {
          showResult('result-getFcmToken', 'getFcmToken', {}, result);
        })
        .catch(function(err) {
          showResult('result-getFcmToken', 'getFcmToken', {}, '[å¼‚å¸¸] ' + err);
        });
    }

    // alert æµ‹è¯•
    function callAlert() {
      if (!checkBridgeEnv()) {
        showResult('result-alert', 'alert', {}, '[æœªæ£€æµ‹åˆ°æ¡¥æ¥ç¯å¢ƒ]');
        return;
      }
      let message = document.getElementById('alertMsg').value;
      window.flutter_inappwebview.callHandler('alert', { message })
        .then(function(result) {
          showResult('result-alert', 'alert', { message }, result);
        })
        .catch(function(err) {
          showResult('result-alert', 'alert', { message }, '[å¼‚å¸¸] ' + err);
        });
    }

    // openWindow æµ‹è¯•
    function callOpenWindow() {
      if (!checkBridgeEnv()) {
        showResult('result-openWindow', 'openWindow', {}, '[æœªæ£€æµ‹åˆ°æ¡¥æ¥ç¯å¢ƒ]');
        return;
      }
      let url = document.getElementById('openWindowUrl').value;
      window.flutter_inappwebview.callHandler('openWindow', { url })
        .then(function(result) {
          showResult('result-openWindow', 'openWindow', { url }, result);
        })
        .catch(function(err) {
          showResult('result-openWindow', 'openWindow', { url }, '[å¼‚å¸¸] ' + err);
        });
    }

    // handleHtmlLink æµ‹è¯•
    function callHandleHtmlLink() {
      if (!checkBridgeEnv()) {
        showResult('result-handleHtmlLink', 'handleHtmlLink', {}, '[æœªæ£€æµ‹åˆ°æ¡¥æ¥ç¯å¢ƒ]');
        return;
      }
      let url = document.getElementById('handleHtmlLinkUrl').value;
      window.flutter_inappwebview.callHandler('handleHtmlLink', { url })
        .then(function(result) {
          showResult('result-handleHtmlLink', 'handleHtmlLink', { url }, result);
        })
        .catch(function(err) {
          showResult('result-handleHtmlLink', 'handleHtmlLink', { url }, '[å¼‚å¸¸] ' + err);
        });
    }

    function showResult(boxId, method, params, result) {
      let box = document.getElementById(boxId);
      let msg = `[${new Date().toLocaleTimeString()}] æ–¹æ³•: ${method}\nå‚æ•°: ${JSON.stringify(params)}\nåŸå§‹ç»“æœ: ${JSON.stringify(result)}`;
      box.innerHTML = `<span style='color:#2575fc;'>${msg.replace(/\n/g,'<br>')}</span>`;
    }

    // JSONå®‰å…¨è§£æ
    function safeParse(str) {
      try {
        return JSON.parse(str);
      } catch (e) {
        alert('å‚æ•°ä¸æ˜¯åˆæ³•JSON');
        return null;
      }
    }

    function copyResult(boxId) {
      var box = document.getElementById(boxId);
      var text = box.innerText || box.textContent;
      if (!text) return;
      if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(function() {
          alert('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
        });
      } else {
        // å…¼å®¹æ—§æµè§ˆå™¨
        var textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
      }
    }

    // æ˜¾ç¤ºå½“å‰æ—¶é—´æˆ³ï¼Œä¾¿äºåˆ¤æ–­é¡µé¢æ˜¯å¦è¢«ç¼“å­˜
    document.getElementById('timestampValue').textContent = Date.now();

    // æ‰“å¼€äºŒçº§æµ‹è¯•é¡µ
    function openChildTestPage() {
      window.open(window.location.pathname + '?scene=child', '_blank');
    }

    // åˆ¤æ–­æ˜¯å¦ä¸ºäºŒçº§æµ‹è¯•é¡µ
    function isChildPage() {
      return /[?&]scene=child/.test(window.location.search);
    }

    function testJsAlert() {
      let msg = document.getElementById('jsAlertMsg').value;
      let t0 = Date.now();
      alert(msg);
      let t1 = Date.now();
      document.getElementById('result-jsAlert').innerHTML =
        `<span style='color:#2575fc;'>alertå¼¹çª—å·²è°ƒç”¨ï¼Œè€—æ—¶${t1-t0}ms</span>`;
    }

    function testJsConfirm() {
      let msg = document.getElementById('jsConfirmMsg').value;
      let t0 = Date.now();
      let result = confirm(msg);
      let t1 = Date.now();
      document.getElementById('result-jsConfirm').innerHTML =
        `<span style='color:#2575fc;'>confirmå¼¹çª—ç»“æœ: <b>${result}</b>ï¼Œè€—æ—¶${t1-t0}ms</span>`;
    }

    function testJsPrompt() {
      let msg = document.getElementById('jsPromptMsg').value;
      let def = document.getElementById('jsPromptDefault').value;
      let t0 = Date.now();
      let result = prompt(msg, def);
      let t1 = Date.now();
      document.getElementById('result-jsPrompt').innerHTML =
        `<span style='color:#2575fc;'>promptå¼¹çª—ç»“æœ: <b>${result}</b>ï¼Œè€—æ—¶${t1-t0}ms</span>`;
    }

    function testJsOpen() {
      let url = document.getElementById('jsOpenUrl').value;
      let t0 = Date.now();
      window.open(url, '_blank');
      let t1 = Date.now();
      document.getElementById('result-jsOpen').innerHTML =
        `<span style='color:#2575fc;'>window.openå·²è°ƒç”¨ï¼Œè€—æ—¶${t1-t0}ms</span>`;
    }

    // åŠ¨æ€ç»‘å®šaæ ‡ç­¾href
    document.getElementById('jsALink').addEventListener('input', function() {
      document.getElementById('testALink').href = this.value;
    });
    document.getElementById('testALink').addEventListener('click', function() {
      document.getElementById('result-jsALink').innerHTML =
        `<span style='color:#2575fc;'>aæ ‡ç­¾å·²ç‚¹å‡»ï¼Œç›®æ ‡: ${this.href}</span>`;
    });
  </script>
</body>
</html> 